{"ast":null,"code":"const LOAD_PROJECTS = 'project/LOAD';\n\nconst loadProjects = projects => ({\n  type: LOAD_PROJECTS,\n  projects\n});\n\nexport const getProjects = () => async dispatch => {\n  const res = await fetch(`/api/projects`);\n  const projects = await res.json();\n  dispatch(loadProjects(projects));\n};\nexport default function portfolioReducer(state = {}, action) {\n  switch (action.type) {\n    case LOAD_PORTFOLIOS:\n      const newPortfolios = {};\n      action['portfolios'].portfolios.forEach(portfolio => {\n        newPortfolios[portfolio.id] = portfolio;\n      });\n      return { ...state,\n        ...newPortfolios\n      };\n\n    case ADD_PORTFOLIO:\n      if (!state[action.portfolio.id]) {\n        return { ...state,\n          [action.portfolio.id]: action.portfolio\n        };\n      }\n\n      return { ...state,\n        [action.portfolio.id]: { ...state[action.portfolio.id],\n          ...action.watchlist\n        }\n      };\n\n    case REMOVE_PORTFOLIO:\n      let newState = { ...state\n      };\n      delete newState[action.portfolioId];\n      return newState;\n\n    case EDIT_PORTFOLIO:\n      return { ...state,\n        [action.portfolio.id]: action.portfolio\n      };\n\n    case ADD_TRADE_TO_PORTFOLIO:\n      let tradeState = { ...state\n      };\n      tradeState[action.trade.portfolio_id].trades.push(action.trade);\n      return tradeState;\n\n    default:\n      return state;\n  }\n}","map":{"version":3,"sources":["/home/tayynicc/ReNewME/react-app/src/store/project.js"],"names":["LOAD_PROJECTS","loadProjects","projects","type","getProjects","dispatch","res","fetch","json","portfolioReducer","state","action","LOAD_PORTFOLIOS","newPortfolios","portfolios","forEach","portfolio","id","ADD_PORTFOLIO","watchlist","REMOVE_PORTFOLIO","newState","portfolioId","EDIT_PORTFOLIO","ADD_TRADE_TO_PORTFOLIO","tradeState","trade","portfolio_id","trades","push"],"mappings":"AAAA,MAAMA,aAAa,GAAG,cAAtB;;AAGA,MAAMC,YAAY,GAAIC,QAAD,KAAe;AAChCC,EAAAA,IAAI,EAAEH,aAD0B;AAEhCE,EAAAA;AAFgC,CAAf,CAArB;;AAOA,OAAO,MAAME,WAAW,GAAG,MAAM,MAAMC,QAAN,IAAmB;AAChD,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,eAAF,CAAvB;AACA,QAAML,QAAQ,GAAG,MAAMI,GAAG,CAACE,IAAJ,EAAvB;AACAH,EAAAA,QAAQ,CAACJ,YAAY,CAACC,QAAD,CAAb,CAAR;AACH,CAJM;AAQP,eAAe,SAASO,gBAAT,CAA0BC,KAAK,GAAC,EAAhC,EAAoCC,MAApC,EAA2C;AACtD,UAAQA,MAAM,CAACR,IAAf;AACI,SAAKS,eAAL;AACI,YAAMC,aAAa,GAAG,EAAtB;AACAF,MAAAA,MAAM,CAAC,YAAD,CAAN,CAAqBG,UAArB,CAAgCC,OAAhC,CAAwCC,SAAS,IAAI;AACjDH,QAAAA,aAAa,CAACG,SAAS,CAACC,EAAX,CAAb,GAA8BD,SAA9B;AACH,OAFD;AAGA,aAAO,EACH,GAAGN,KADA;AAEH,WAAGG;AAFA,OAAP;;AAKJ,SAAKK,aAAL;AACI,UAAG,CAACR,KAAK,CAACC,MAAM,CAACK,SAAP,CAAiBC,EAAlB,CAAT,EAAgC;AAC5B,eAAO,EACH,GAAGP,KADA;AAEH,WAACC,MAAM,CAACK,SAAP,CAAiBC,EAAlB,GAAwBN,MAAM,CAACK;AAF5B,SAAP;AAIH;;AAED,aAAO,EACH,GAAGN,KADA;AAEH,SAACC,MAAM,CAACK,SAAP,CAAiBC,EAAlB,GAAwB,EACpB,GAAGP,KAAK,CAACC,MAAM,CAACK,SAAP,CAAiBC,EAAlB,CADY;AAEpB,aAAGN,MAAM,CAACQ;AAFU;AAFrB,OAAP;;AAQJ,SAAKC,gBAAL;AACI,UAAIC,QAAQ,GAAG,EAAE,GAAGX;AAAL,OAAf;AACA,aAAOW,QAAQ,CAACV,MAAM,CAACW,WAAR,CAAf;AACA,aAAOD,QAAP;;AAEJ,SAAKE,cAAL;AACI,aAAO,EACH,GAAGb,KADA;AAEH,SAACC,MAAM,CAACK,SAAP,CAAiBC,EAAlB,GAAwBN,MAAM,CAACK;AAF5B,OAAP;;AAKJ,SAAKQ,sBAAL;AACI,UAAIC,UAAU,GAAG,EAAE,GAAGf;AAAL,OAAjB;AACAe,MAAAA,UAAU,CAACd,MAAM,CAACe,KAAP,CAAaC,YAAd,CAAV,CAAsCC,MAAtC,CAA6CC,IAA7C,CAAkDlB,MAAM,CAACe,KAAzD;AACA,aAAOD,UAAP;;AAEJ;AACI,aAAOf,KAAP;AA5CR;AA8CH","sourcesContent":["const LOAD_PROJECTS = 'project/LOAD'\n\n\nconst loadProjects = (projects) => ({\n    type: LOAD_PROJECTS,\n    projects\n})\n\n\n\nexport const getProjects = () => async(dispatch) => {\n    const res = await fetch(`/api/projects`);\n    const projects = await res.json()\n    dispatch(loadProjects(projects))\n}\n\n\n\nexport default function portfolioReducer(state={}, action){\n    switch (action.type) {\n        case LOAD_PORTFOLIOS:\n            const newPortfolios = {}\n            action['portfolios'].portfolios.forEach(portfolio => {\n                newPortfolios[portfolio.id] = portfolio;\n            })\n            return {\n                ...state,\n                ...newPortfolios\n            }\n\n        case ADD_PORTFOLIO:\n            if(!state[action.portfolio.id]) {\n                return {\n                    ...state,\n                    [action.portfolio.id] : action.portfolio\n                }\n            }\n\n            return {\n                ...state,\n                [action.portfolio.id] : {\n                    ...state[action.portfolio.id],\n                    ...action.watchlist\n                }\n            }\n\n        case REMOVE_PORTFOLIO:\n            let newState = { ...state }\n            delete newState[action.portfolioId]\n            return newState\n\n        case EDIT_PORTFOLIO:\n            return {\n                ...state,\n                [action.portfolio.id] : action.portfolio\n            }\n\n        case ADD_TRADE_TO_PORTFOLIO:\n            let tradeState = { ...state }\n            tradeState[action.trade.portfolio_id].trades.push(action.trade)\n            return tradeState\n\n        default:\n            return state\n    }\n}\n"]},"metadata":{},"sourceType":"module"}